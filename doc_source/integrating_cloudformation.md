# Create secrets in AWS CloudFormation<a name="integrating_cloudformation"></a>

You can create secrets in a CloudFormation stack by using the `[ AWS::SecretsManager::Secret](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-secretsmanager-secret.html)` resource in a CloudFormation template\. 

A common scenario is to first create a secret with a password generated by Secrets Manager, and then use a *[dynamic reference](cfn-example_reference-secret.md)* to retrieve the username and password from the secret to use as credentials for a new database\. See the examples below\.

To attach a resource policy to your secret, use the `[ AWS::SecretsManager::ResourcePolicy](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-secretsmanager-resourcepolicy.html)` resource\.

If the secret contains Amazon RDS, Amazon Redshift, or Amazon DocumentDB credentials, to turn on automatic rotation for a secret, use the `[ AWS::SecretsManager::SecretTargetAttachment](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-secretsmanager-secrettargetattachment.html)` resource to add details about the database to the secret that Secrets Manager needs to rotate the secret\. Then use the `[ AWS::SecretsManager::RotationSchedule](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-secretsmanager-rotationschedule.html)` resource to turn on automatic rotation\. You specify both the Lambda rotation function and the rotation schedule in this resource\. For a secret that contains Amazon RDS, Amazon Redshift, or Amazon DocumentDB credentials, use one of the provided [Rotation function templates](reference_available-rotation-templates.md)\. 

For other types of secrets, you create your own rotation function and then use the `[ AWS::SecretsManager::RotationSchedule](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-secretsmanager-rotationschedule.html)` resource to turn on automatic rotation\. Secrets Manager provides a [Generic rotation function template](reference_available-rotation-templates.md#sar-template-generic) that you can use as a starting point\.

For information about creating resources with AWS CloudFormation, see [Learn template basics](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html) in the AWS CloudFormation User Guide\. You can also use the AWS Cloud Development Kit \(CDK\)\. For more information, see [AWS Secrets Manager Construct Library](https://docs.aws.amazon.com/cdk/api/latest/docs/aws-secretsmanager-readme.html)\.

**Topics**
+ [Create a simple secret](cfn-example_secret.md)
+ [Create a secret with Amazon RDS credentials](cfn-example_RDSsecret_no-rotation.md)
+ [Create a secret with Amazon RDS credentials with automatic rotation](cfn-example_RDSsecret.md)
+ [Create a secret with Amazon Redshift credentials with automatic rotation](cfn-example_Redshift-secret.md)
+ [Create a secret with Amazon DocumentDB credentials with automatic rotation](cfn-example_DocDB-secret.md)